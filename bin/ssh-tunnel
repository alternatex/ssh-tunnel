#!/usr/bin/env node

"use strict";

/**
 * Module dependencies
 */
var colors = require("colors");
var program = require('commander');
var version = JSON.parse(require('fs').readFileSync(__dirname+'/../package.json', 'utf8')).version;

console.log('SSH-Tunnel'.white.bold); 
console.log(('Version: '+version).white); 

// TODO: gather program.command info from lib/prompt/* -> require-dir

program
  .version(version)
  .option('-f, --file <file>', 'Load configuration from <file> (default: \'tunnel.json\')')
  .command('connect <name>', 'Establish connection')
  .command('copy <name>', 'Copy existing connection')
  .command('delete <name>', 'Delete connection')
  .command('update <name>', 'Update connection')
  .command('export <file>', 'Export connections to file')
  //.command('import <file>', 'Import connections from file')  
  .command('install', 'Install your public key in a remote machine\'s authorized_keys')
  .parse(process.argv);

if(program.args.length===0){
  console.log();
  console.log("Starting interactive mode".green);  
  console.log();
  
  var filename = program.file ? program.file : 'tunnel.json';
  
  var app = require("../lib/app");
  app.init({ filename: filename });
  app.require('connections')();
}